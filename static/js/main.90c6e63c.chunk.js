(this["webpackJsonpbooks-digital-console"]=this["webpackJsonpbooks-digital-console"]||[]).push([[0],{114:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),i=n.n(c),o=(n(114),n(64)),s=n(83),l=n.n(s),u=n(19),j=n(63),d=n(51),b={isLoading:!1,status:!1,userId:0,token:void 0,error:void 0,message:void 0},h=Object(o.b)({name:"auth",initialState:b,reducers:{authRequest:function(e){e.isLoading=!0},authResponse:function(e,t){var n=t.payload;e.isLoading=!1,e.status=n.success||!1,e.token=n.token,e.userId=n.id,e.error=n.error||!0,e.message=n.message},logout:function(e){e.status=!1,e.token=void 0}}}),O=h.actions,m=O.authRequest,p=O.authResponse,x=O.logout,f=h.reducer,g=Object(u.b)({authReducer:f}),v={key:"root",storage:l.a},w=Object(j.a)(v,g),y=Object(o.a)({reducer:w,devTools:!1,middleware:[d.a]}),k=n(20),C=n(84),S=n(182),P=n(50),L=n(15),N=n(12),T=n(47),R=n(65),D=n(175),I=n(178),E=n(3),F=["text","loading"],A=function(e){var t=e.text,n=e.loading,a=Object(R.a)(e,F);return Object(E.jsx)(D.a,Object(N.a)(Object(N.a)({fullWidth:!0,variant:"contained",color:"primary"},a),{},{children:n?Object(E.jsx)(I.a,{size:24,variant:"indeterminate",color:"inherit"}):t}))},z=n(189),M=function(e){return Object(E.jsx)(z.a,Object(N.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,size:"small"},e))},W=n(181),B=n(195),q=n(95),J=n(183),H=n(192),U=n(185),Z=n(179),$=n(190),G=n(194),Y=n(191),K=n(62),Q=n.n(K),V=n(180),X=n(55),_=n.n(X),ee=n(70),te=n(89),ne=n.n(te),ae="https://digi-books.herokuapp.com/",re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={"Content-Type":"application/json",Authorization:"Bearer ".concat(e)};return ne.a.create({baseURL:t,headers:Object(N.a)(Object(N.a)({},a),n)})};function ce(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function ie(e){return/^([0-9]{10})$/.test(String(e))}function oe(){return Object(E.jsxs)(q.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(E.jsx)(Z.a,{color:"inherit",href:"https://github.com/devinbits/books-digital-express#readme",children:"Digital Express"})," ",(new Date).getFullYear(),"."]})}var se=function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}},le=Object(V.a)((function(e){return se(e)})),ue=function(e,t){return e.length&&t};function je(){var e=le(),t=Object(k.b)(),n=Object(L.g)(),a=Object(k.c)((function(e){return e.authReducer})),c=a.status,i=a.token,o=a.isLoading,s=a.message,l=a.error,u=r.a.useState(!1),j=Object(T.a)(u,2),d=j[0],b=j[1],h=r.a.useState({}),O=Object(T.a)(h,2),f=O[0],g=O[1];r.a.useEffect((function(){c&&i&&n.replace("/home")}),[n,c,i]),r.a.useEffect((function(){d&&!o&&setTimeout((function(){return b(!1)}),3e3)}),[d,o]);var v=f.email,w=void 0===v?"":v,y=f.password,C=void 0===y?"":y,P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.email,n=void 0===t?"":t,a=e.password,r=void 0===a?"":a,c={};return ce(n)||(c.email=!0),r.length<8&&(c.password=!0),c}(f);return Object(E.jsxs)(W.a,{component:"main",maxWidth:"xs",children:[Object(E.jsx)(S.a,{}),Object(E.jsxs)("div",{className:e.paper,children:[Object(E.jsx)(B.a,{className:e.avatar,children:Object(E.jsx)(Q.a,{})}),Object(E.jsx)(q.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(E.jsxs)("form",{className:e.form,children:[Object(E.jsx)(M,{value:w,error:ue(w,P.email),helperText:"Please enter valid email.",onChange:function(e){return g((function(t){return Object(N.a)(Object(N.a)({},t),{},{email:e.target.value})}))},inputProps:{maxLength:45},id:"email",label:"Email Address",autoComplete:"email",autoFocus:!0}),Object(E.jsx)(M,{value:C,error:ue(C,P.password),helperText:"Please enter password.",onChange:function(e){return g((function(t){return Object(N.a)(Object(N.a)({},t),{},{password:e.target.value})}))},inputProps:{maxLength:10},label:"Password",type:"password",id:"password"}),Object(E.jsx)(J.a,{control:Object(E.jsx)(H.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(E.jsx)(A,{text:"Sign In",loading:o,className:e.submit,disabled:0!==Object.keys(P).length,onClick:function(){t(function(e,t){return function(){var n=Object(ee.a)(_.a.mark((function n(a,r){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(m()),re().post("auth/login",JSON.stringify({email:e,password:t})).then((function(e){a(p(e.data))})).catch((function(e){return a(p({error:e}))}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(f.email,f.password)),b(!0)}}),Object(E.jsx)(U.a,{container:!0,justify:"center",children:Object(E.jsx)(U.a,{item:!0,children:Object(E.jsx)(Z.a,{href:"#/register",variant:"body2",children:"Don't have an account? Sign Up"})})})]})]}),Object(E.jsx)($.a,{mt:4,children:Object(E.jsx)(oe,{})}),Object(E.jsx)(G.a,{open:d&&s&&!o,onClose:function(){return t(x())},children:Object(E.jsx)(Y.a,{severity:l?"error":"success",children:s})})]})}var de=Object(V.a)((function(e){return se(e)}));function be(){var e=de(),t=Object(k.b)(),n=Object(L.g)(),a=Object(k.c)((function(e){return e.authReducer})),c=a.status,i=a.token,o=a.isLoading,s=a.message,l=a.error,u=r.a.useState(!1),j=Object(T.a)(u,2),d=j[0],b=j[1],h=r.a.useState({}),O=Object(T.a)(h,2),f=O[0],g=O[1],v=f.name,w=void 0===v?"":v,y=f.email,C=void 0===y?"":y,P=f.password,R=void 0===P?"":P,D=f.phone,I=void 0===D?"":D,F=function(e,t){return e.length&&t};r.a.useEffect((function(){c&&i&&n.replace("/home")}),[n,c,i]),r.a.useEffect((function(){d&&!o&&setTimeout((function(){return b(!1)}),3e3)}),[d,o]);var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t,a=e.email,r=void 0===a?"":a,c=e.password,i=void 0===c?"":c,o=e.phone,s=void 0===o?"":o,l={};return n.length<3&&(l.name=!0),ce(r)||(l.email=!0),i.length<8&&(l.password=!0),ie(s)||(l.phone=!0),l}(f);return Object(E.jsxs)(W.a,{component:"main",maxWidth:"xs",children:[Object(E.jsx)(S.a,{}),Object(E.jsxs)("div",{className:e.paper,children:[Object(E.jsx)(B.a,{className:e.avatar,children:Object(E.jsx)(Q.a,{})}),Object(E.jsx)(q.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(E.jsxs)("form",{className:e.form,children:[Object(E.jsx)(M,{value:w,error:F(w,z.name),helperText:"Please enter valid name.",onChange:function(e){return g((function(t){return Object(N.a)(Object(N.a)({},t),{},{name:e.target.value})}))},inputProps:{maxLength:25},id:"name",label:"Full Name",autoComplete:"name",autoFocus:!0}),Object(E.jsx)(M,{value:C,error:F(C,z.email),helperText:"Please enter valid email.",onChange:function(e){return g((function(t){return Object(N.a)(Object(N.a)({},t),{},{email:e.target.value})}))},inputProps:{maxLength:45},id:"email",label:"Email Address",autoComplete:"email"}),Object(E.jsx)(M,{value:I,error:F(I,z.phone),helperText:"Please enter valid phone number.",onChange:function(e){return g((function(t){return Object(N.a)(Object(N.a)({},t),{},{phone:e.target.value})}))},inputProps:{maxLength:10},id:"phone",label:"Phone Number"}),Object(E.jsx)(M,{value:R,error:F(R,z.password),helperText:"Please enter password.",onChange:function(e){return g((function(t){return Object(N.a)(Object(N.a)({},t),{},{password:e.target.value})}))},inputProps:{maxLength:10},label:"Password",type:"password",id:"password"}),Object(E.jsx)(A,{text:"Get Started",loading:o,className:e.submit,disabled:0!==Object.keys(z).length,onClick:function(){t(function(e){var t=e.name,n=e.email,a=e.password,r=e.phone;return function(){var e=Object(ee.a)(_.a.mark((function e(c,i){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(m()),re().post("auth/register",{name:t,email:n,password:a,phone:r,nationalId:"".concat(n.split("@")[0].slice(0,10)).concat(r)}).then((function(e){c(p(e.data))})).catch((function(e){return c(p({error:e}))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}(f)),b(!0)}}),Object(E.jsx)(U.a,{container:!0,justify:"center",children:Object(E.jsx)(U.a,{item:!0,children:Object(E.jsx)(Z.a,{href:"#/login",variant:"body2",children:"Already have an account? Sign In"})})})]})]}),Object(E.jsx)(G.a,{open:d&&s&&!o,onClose:function(){return t(x())},children:Object(E.jsx)(Y.a,{severity:l?"error":"success",children:s})}),Object(E.jsx)($.a,{mt:6,children:Object(E.jsx)(oe,{})})]})}var he=n(186),Oe=n(187),me=n(184),pe=n(188),xe=n(91),fe=n.n(xe),ge=n(92),ve=n.n(ge),we=n(93),ye=n.n(we),ke=function(){var e=Object(k.b)();return Object(E.jsx)(he.a,{position:"static",children:Object(E.jsx)(Oe.a,{children:Object(E.jsxs)(U.a,{container:!0,children:[Object(E.jsx)(U.a,{children:Object(E.jsx)(q.a,{children:"Books Digital"})}),Object(E.jsx)(U.a,{item:!0,sm:!0})," ",Object(E.jsxs)(U.a,{children:[" ",Object(E.jsx)(me.a,{children:Object(E.jsx)(pe.a,{badgeContent:4,color:"secondary",children:Object(E.jsx)(fe.a,{})})}),Object(E.jsx)(me.a,{children:Object(E.jsx)(pe.a,{badgeContent:4,color:"secondary",children:Object(E.jsx)(ve.a,{})})}),Object(E.jsx)(me.a,{onClick:function(){return e(x())},children:Object(E.jsx)(ye.a,{})})]})]})})})},Ce=Object(V.a)({container:{height:"100vh",display:"flex",backgroundColor:"red",flexDirection:"column"},body:{height:"100%",backgroundColor:"yellow",display:"flex",flexDirection:"row"}}),Se=function(e){var t=e.Header,n=e.SideMenu,a=e.children,r=Ce();return Object(E.jsxs)("div",{className:r.container,children:[t&&Object(E.jsx)(t,{}),Object(E.jsxs)("div",{className:r.body,children:[n&&Object(E.jsx)(n,{}),a]})]})},Pe=Object(V.a)({sideMenu:{display:"flex",flexDirection:"column",width:"250px",backgroundColor:"#253053"}}),Le=function(){var e=Pe();return Object(E.jsx)("div",{className:e.sideMenu})},Ne=function(e){return Object(E.jsx)(Se,{Header:ke,SideMenu:Le,children:Object(E.jsx)("h1",{children:"WIP"})})},Te=["children"],Re=function(e){var t=e.children,n=Object(R.a)(e,Te),a=Object(k.c)((function(e){return e.authReducer})).token;return Object(E.jsx)(L.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){e.location;return a?t:Object(E.jsx)(L.a,{to:{pathname:"/login"}})}}))},De=function(){return Object(E.jsx)(P.a,{children:Object(E.jsxs)(L.d,{children:[Object(E.jsx)(L.b,{exact:!0,path:"/login",component:je}),Object(E.jsx)(L.b,{exact:!0,path:"/register",component:be}),Object(E.jsx)(Re,{path:"/home",children:Object(E.jsx)(Ne,{})}),Object(E.jsx)(L.b,{path:"*",children:Object(E.jsx)(L.a,{exact:!0,from:"/",to:"home"})})]})})},Ie=Object(j.b)(y);var Ee=function(){return Object(E.jsx)(k.a,{store:y,children:Object(E.jsxs)(C.a,{loading:null,persistor:Ie,children:[Object(E.jsx)(S.a,{}),Object(E.jsx)(De,{})]})})},Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(Ee,{})}),document.getElementById("root")),Fe()}},[[148,1,2]]]);
//# sourceMappingURL=main.90c6e63c.chunk.js.map